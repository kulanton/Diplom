= form_for @test do |f|
  -if @test.errors.any?
    .div.error
      %h2= "При сохранении произошли ошибки"
      %ul
        - @test.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :name
    &nbsp;
    = f.text_field :name
  .field
    = f.label :necessary
    &nbsp;
    = f.check_box :necessary
  .field
    = f.label :block
    &nbsp;
    = f.check_box :block
  .field
    = f.label :num_try
    &nbsp;
    = f.number_field :num_try
  .field
    = f.label :period
    &nbsp;
    = f.number_field :period
  .field
    = f.label :type
    &nbsp;
    = f.select :type, @test.types
  .field
    = f.label :auth_type
    &nbsp;
    = f.select :auth_type, @test.auth_types
  .field
    = f.label :w_key
    &nbsp;
    = f.check_box :w_key
  .field
    = f.label :ext_access
    &nbsp;
    = f.check_box :ext_access
  .field
    = f.label :msiu_access
    &nbsp;
    = f.check_box :msiu_access
  -#.field
  -#  = f.label :disciplines_groups_id
  -#  &nbsp;
  -#  = f.select :disciplines_groups_id, DisciplinesGroups.includes(:discipline, :group).all.map{|dg| [dg.discipline.name+" - "+dg.group.name+" - "+dg.group.year, dg.id]}
  .field
    = f.label :disciplines_groups_token, "Дисциплина - Группа"
    &nbsp;
    = f.text_field :disciplines_groups_token, "data-pre"=>@test.disciplines_groups.to_a.map(&:attributes).to_json
  .field
    = f.label :order
    &nbsp;
    = f.number_field :order
  .field
    = f.label :theme_pct
    &nbsp;
    = f.number_field :theme_pct
  .field
    = f.label :question_pct
    &nbsp;
    = f.number_field :question_pct
  .actions
    = f.submit 'Сохранить'
